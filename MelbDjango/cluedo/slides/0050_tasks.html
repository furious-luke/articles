<section>
  <h2>The Performance</h2>
  <ul>
    <li>Workforce</li>
    <li>Tasks</li>
    <li>Django Rest Framework</li>
    <li>JSON-API Specification</li>
  </ul>
  <aside class="notes">
    <p>
      So let's move away from Cluedo, briefly, to talk about the
      pickle of a situation we found ourselves in with our
      software. To bring you up to speed I'll talk a little about one
      of our products at Uptick, the libraries we use, and the
      performance issue we found.
    </p>
  </aside>
</section>

<section>
  <div class="svg"><!-- {"id": "logo2"} --></div>
  <div style="text-align: right; padding-right: 13rem">Workforce</div>
  <aside class="notes">
    <p>
      At Uptick we have a number of products, but Workforce is our
      oldest and largest. It's designed to be used by companies that
      work in the fire safety industry, and, amongst many other
      things, it keeps track of what operations need to be carried out
      at a commerical property in order for the property to be
      compliant with national fire safety standards.
    </p>
  </aside>
</section>

<section>
  <img src="./media/task-web.svg" />
  <aside class="notes">
    <p>
      In Workforce there is the concept of a Task. A Task represents a
      particular set of work that needs to be done at a certain time,
      at a certain property. In many ways Tasks form the backbone of
      the product. And, as such, they have a tendency to create
      something of a web of connections across our data models.
    </p>
  </aside>
</section>

<section data-background="./media/task-list.png" data-background-size="contain">
  <aside class="notes">
    <p>
      A key feature of Workforce is providing our clients with a dynamic
      listing of all their tasks. Intrinsically this is not so
      difficult. The trouble begins when our clients, and each of
      their employees, wants to see a different set of columns, and
      filter by different parameters within this Task view. We needed to build
      our APIs  flexible enough to handle this broad set of variations in columns and
      filters.
    </p>
  </aside>
</section>

<section class="spacedv-5">
  <div>
    <h3>Django Rest Framework</h3>
    <a style="font-size: 0.6em" href="https://www.django-rest-framework.org/">https://www.django-rest-framework.org</a>
  </div>
  <div>
    <h3>DRF-JSONAPI</h3>
    <a style="font-size: 0.6em" href="https://github.com/django-json-api/django-rest-framework-json-api">https://github.com/django-json-api/django-rest-framework-json-api</a>
  </div>
  <aside class="notes">
    <p>
      These two packages do most of the heavy lifting for us. The
      first I'm sure will be very familiar to you, Django Rest
      Framework, the ubiquitous RESTful API library for Django. The
      second may not be so familiar. An extension to DRF, Django Rest
      Framework Json-API implements the Json-API specification, or at
      least something close enough to it. So what is the Json-API
      specification?
    </p>
  </aside>
</section>

<section>
  <div>
    <h3>JSON-API Specification</h3>
    <a style="font-size: 0.6em" href="https://jsonapi.org/">https://jsonapi.org</a>
  </div>
  <pre style="font-size: 0.8rem"><code data-trim data-noescape>
{
  "links": {
    "self": "http://example.com/articles",
    "next": "http://example.com/articles?page[offset]=2",
    "last": "http://example.com/articles?page[offset]=10"
  },
  "data": [{
    "type": "articles",
    "id": "1",
    "attributes": {
      "title": "JSON:API paints my bikeshed!"
    },
    "relationships": {
      "author": {
        "links": {
          "self": "http://example.com/articles/1/relationships/author",
          "related": "http://example.com/articles/1/author"
        },
        "data": { "type": "people", "id": "9" }
      },
      "comments": {
        "links": {
          "self": "http://example.com/articles/1/relationships/comments",
          "related": "http://example.com/articles/1/comments"
        },
        "data": [
          { "type": "comments", "id": "5" },
          { "type": "comments", "id": "12" }
        ]
      }
    },
    "links": {
      "self": "http://example.com/articles/1"
    }
  }],
  "included": [{
    "type": "people",
    "id": "9",
    "attributes": {
      "firstName": "Dan",
      "lastName": "Gebhardt",
      "twitter": "dgeb"
    },
    "links": {
      "self": "http://example.com/people/9"
    }
  }, {
    "type": "comments",
    "id": "5",
    "attributes": {
      "body": "First!"
    },
    "relationships": {
      "author": {
        "data": { "type": "people", "id": "2" }
      }
    },
    "links": {
      "self": "http://example.com/comments/5"
    }
  }, {
    "type": "comments",
    "id": "12",
    "attributes": {
      "body": "I like XML better"
    },
    "relationships": {
      "author": {
        "data": { "type": "people", "id": "9" }
      }
    },
    "links": {
      "self": "http://example.com/comments/12"
    }
  }]
}
  </code></pre>
  <aside class="notes">
    <p>
      Json-API is a standard developed to help build flexible and
      powerful APIs. It's designed to provide enhanced relationship
      querying, field selection, and pagination, amongst other
      things. The relationship querying is rather pertinent to our
      Task list, as it allows easy selection of connected models
      dynamically.
    </p>
  </aside>
</section>
